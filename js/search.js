(()=>{var c=60,u={shouldSort:!0,includeMatches:!0,threshold:0,tokenize:!0,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:[{name:"title",weight:.8},{name:"contents",weight:.5},{name:"tags",weight:.3},{name:"categories",weight:.3}]},h=y("s");h&&($("#search-query").val(h),p(h));function p(i){$.getJSON(indexURL,function(s){let r=s,n=new Fuse(r,u).search(i);console.log({matches:n}),n.length>0?f(n,i):$("#search-results").append('<div class="text-center"><img class="img-fluid mb-5" src="https://user-images.githubusercontent.com/37659754/64060567-7cece400-cbf0-11e9-9cf9-abac3543ec1f.png"><h3>No Search Found</h3></div>')})}function f(i,s){$.each(i,function(r,t){let n=t.item.contents,a="",g=[];u.tokenize?g.push(s):$.each(t.matches,function(d,e){if(e.key=="tags"||e.key=="categories")g.push(e.value);else if(e.key=="contents"){let o=e.indices[0][0]-c>0?e.indices[0][0]-c:0,m=e.indices[0][1]+c<n.length?e.indices[0][1]+c:n.length;a+=n.substring(o,m),g.push(e.value.substring(e.indices[0][0],e.indices[0][1]-e.indices[0][0]+1))}}),a.length<1&&(a+=n.substring(0,c*2));let l=$("#search-result-template").html();if(l){let d=b(l,{key:r,title:t.item.title,link:t.item.permalink,tags:t.item.tags,categories:t.item.categories,snippet:a,image:t.item.image,date:t.item.date,readingTime:t.item.readingTime,summary:t.item.summary});$("#search-results").append(d),$.each(g,function(e,o){$("#summary-"+r).mark(o)})}})}function y(i){return decodeURIComponent((location.search.split(i+"=")[1]||"").split("&")[0]).replace(/\+/g," ")}function b(i,s){let r=/\$\{\s*([a-zA-Z0-9_]*)\s*\}/g;return i=i.replace(r,function(t,n){return s[n]!==void 0&&s[n]!==null?s[n]:""}),i}})();
